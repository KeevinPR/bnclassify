# Sample .travis.yml for R projects

language: r
warnings_are_errors: true
sudo: required   

env:
 global:
   - CRAN: http://cran.rstudio.com
   
before_install: 
    - sudo apt-get install ghostscript
    - echo "options(repos = c(CRAN='http://cran.rstudio.com'))" > ~/.Rprofile   
    
install:  
  - Rscript -e "source('http://bioconductor.org/biocLite.R');tryCatch(useDevel(TRUE), error=function(e)"'{if (!grepl'"('already in use', e)) {e}}); options(repos=biocinstallRepos()); biocLite(commandArgs(TRUE))" graph RBGL Rgraphviz
  - Rscript -e "install.packages(c('assertthat', 'entropy', 'matrixStats', 'rpart', 'gRain', 'gRbase', 'mlr', 'testthat', 'knitr', 'microbenchmark', 'ParamHelpers', 'rmarkdown','covr', 'memoise'))"
  
after_success:
  - Rscript -e 'covr::codecov()'
  
notifications:
  email:
    on_success: change
    on_failure: change 
